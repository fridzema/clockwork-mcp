---
description: Detect N+1 query patterns in the latest request
---

First use `get_latest_request` to get the latest request ID.
Then use `detect_n_plus_one` with that request ID.

Output a summary in this format:

## N+1 Query Detection

Found N potential N+1 patterns in request [METHOD] /uri/path

### Pattern 1: X occurrences
```sql
SELECT * FROM table WHERE id = ?
```
**Fix:** Use eager loading with `->with('relation')` or `->load('relation')`

### Pattern 2: Y occurrences
```sql
SELECT * FROM other_table WHERE foreign_id = ?
```
**Fix:** Add to your eager loading chain

## How to Fix N+1 Queries

In your controller or query:
```php
// Before (N+1)
$users = User::all();
foreach ($users as $user) {
    echo $user->posts; // Triggers query for each user
}

// After (eager loaded)
$users = User::with('posts')->get();
foreach ($users as $user) {
    echo $user->posts; // No additional queries
}
```

If no N+1 patterns are found, output:

## N+1 Query Detection

No N+1 patterns detected in the latest request.
